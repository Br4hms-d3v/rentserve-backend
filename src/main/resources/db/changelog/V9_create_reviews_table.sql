CREATE TABLE reviews
(
    id               bigint NOT NULL,
    rating           double precision,
    comment          text,
    created_at       timestamp(6) without time zone NOT NULL,
    updated_at       timestamp(6) without time zone,
    user_favor_id    bigint,
    user_material_id bigint,
    is_active        boolean
);

ALTER TABLE reviews ALTER COLUMN id
    ADD GENERATED BY DEFAULT AS IDENTITY (
        SEQUENCE NAME reviews_id_seq
        START WITH 1
        INCREMENT BY 1
        NO MINVALUE
        NO MAXVALUE
        CACHE 1
    );

ALTER TABLE reviews
    ADD CONSTRAINT reviews_pkey PRIMARY KEY (id);

ALTER TABLE reviews
    ADD CONSTRAINT fk_reviews_to_user_materials
        FOREIGN KEY (user_material_id) REFERENCES user_materials (id);

ALTER TABLE reviews
    ADD CONSTRAINT fk_review_comment_favor FOREIGN KEY (user_favor_id) REFERENCES user_favour(id);